language: node_js
matrix:
  include:
    - node_js: "node"
      env: CI=true
    - node_js: "8"
      env: ESLINT=6
    - node_js: "10"
    - node_js: "12"

before_install:
  - if [ "$ESLINT" = "6" ]; then npm i -S eslint@6; fi

before_script:
  - if [ "$CI" = "true" ]; then npm run lint; fi

deploy:
  skip_cleanup: true
  provider: npm
  email: $EMAIL
  api_key: $NPM_TOKEN
  on:
    tags: true
notifications:
  email: false
after_success:
  - if [ "$CI" = "true" ]; then npm install coveralls --no-save && cat ./coverage/lcov.info | ./node_modules/.bin/coveralls; fi
